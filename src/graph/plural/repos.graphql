fragment Publisher on Publisher {
  id
  name
  phone
  avatar
  description
  backgroundColor
}

fragment MinRepo on Repository {
  category
  darkIcon
  description
  icon
  id
  name
  private
  publisher {
    ...Publisher
  }
  releaseStatus
  tags {
    tag
  }
  trending
  verified
  recipes {
    ...MinRecipe
  }

  # Remove later when repositories q is public
  readme
  mainBranch
  homepage
  gitUrl
  license {
    name
    url
  }
  community {
    discord
    slack
    homepage
    gitUrl
    twitter
  }
}

fragment FullRepo on Repository {
  ...MinRepo
  readme
  mainBranch
  homepage
  gitUrl
  license {
    name
    url
  }
  community {
    discord
    slack
    homepage
    gitUrl
    twitter
  }
  recipes {
    ...Recipe
  }
}

query Repos {
  repositories(first: 5000) {
    edges {
      node {
        ...MinRepo
      }
    }
  }
}

query Repos {
  repositories(first: 5000) {
    edges {
      node {
        ...MinRepo
      }
    }
  }
}

query Repo($name: String) {
  repository(name: $name) {
    ...FullRepo
  }
}

fragment Category on CategoryInfo {
  category
  count
}

fragment PageInfo on PageInfo {
  endCursor
  hasNextPage
}

query Categories {
  categories {
    ...Category
  }
}

fragment Tag on GroupedTag {
  tag
  count
}

query Tags($cursor: String) {
  tags(type: REPOSITORIES, first: 5000, after: $cursor) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...Tag
      }
    }
  }
}
